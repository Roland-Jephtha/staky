<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rocket Pool - Decentralised Ethereum Liquid Staking Protocol</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

[data-theme="dark"] {
  --bg: #1a1a1f;
  --card: #22222a;
  --card2: #1e1e26;
  --border: #2e2e3a;
  --border2: #3a3a48;
  --text: #e8e8ef;
  --muted: #6b6b80;
  --muted2: #9090a8;
  --input-bg: #181820;
  --modal-bg: #1f1f28;
  --menu-bg: #ffffff;
  --menu-text: #1a1a2e;
  --menu-muted: #9a9aaa;
  --menu-border: #ebebf0;
  --menu-hover: #f6f6fa;
  --toggle-track: #3a3a4a;
  --toggle-bg: #252530;
  --shadow: 0 20px 60px rgba(0,0,0,0.5);
}

[data-theme="light"] {
  --bg: #eef0f2;
  --card: #ffffff;
  --card2: #f5f5f8;
  --border: #e0e0ea;
  --border2: #d0d0dd;
  --text: #1a1a2e;
  --muted: #aaaabc;
  --muted2: #7a7a96;
  --input-bg: #f5f5f8;
  --modal-bg: #ffffff;
  --menu-bg: #ffffff;
  --menu-text: #1a1a2e;
  --menu-muted: #9a9aaa;
  --menu-border: #ebebf0;
  --menu-hover: #f6f6fa;
  --toggle-track: #d0d0dd;
  --toggle-bg: #e8e8f0;
  --shadow: 0 20px 60px rgba(0,0,0,0.12);
}

:root {
  --orange: #e8773c;
  --orange-hover: #d96a2f;
  --green: #22c55e;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  font-size: 14px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  transition: background 0.25s, color 0.25s;
}

/* NAV */
nav {
  width: 100%;
  max-width: 1200px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
}

.logo {
  width: 40px; height: 40px;
  background: var(--orange); border-radius: 50%;
  display: flex; align-items: center; justify-content: center; cursor: pointer;
}

.hamburger {
  background: none; border: none; cursor: pointer;
  display: flex; flex-direction: column; gap: 5px; padding: 6px;
  z-index: 201; position: relative;
}
.hamburger span {
  display: block; width: 20px; height: 2px;
  background: var(--muted2); border-radius: 2px; transition: all 0.22s ease;
}
.hamburger.open span:nth-child(1) { transform: translateY(7px) rotate(45deg); }
.hamburger.open span:nth-child(2) { opacity: 0; transform: scaleX(0); }
.hamburger.open span:nth-child(3) { transform: translateY(-7px) rotate(-45deg); }

/* SLIDE-IN MENU */
.menu-backdrop {
  position: fixed; inset: 0; z-index: 199;
  background: rgba(0,0,0,0); pointer-events: none;
  transition: background 0.25s;
}
.menu-backdrop.open { background: rgba(0,0,0,0.35); pointer-events: all; }

.side-menu {
  position: fixed; top: 0; right: 0;
  width: 340px; max-width: 100vw; height: 100vh;
  background: var(--menu-bg);
  box-shadow: -6px 0 40px rgba(0,0,0,0.18);
  z-index: 200;
  transform: translateX(100%);
  transition: transform 0.28s cubic-bezier(0.4,0,0.2,1), background 0.25s;
  display: flex; flex-direction: column;
  overflow-y: auto;
}
.side-menu.open { transform: translateX(0); }

.menu-top {
  display: flex; align-items: center; justify-content: space-between;
  padding: 22px 24px 18px;
  border-bottom: 1px solid var(--menu-border);
}
.menu-brand-logo {
  width: 44px; height: 44px; background: var(--orange); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
}
.menu-x {
  background: none; border: none; cursor: pointer; color: var(--menu-muted);
  font-size: 20px; padding: 4px; transition: color 0.15s; line-height: 1;
}
.menu-x:hover { color: var(--menu-text); }

.menu-section { padding: 18px 16px 0; }
.menu-label {
  font-size: 11px; font-weight: 700; letter-spacing: 0.09em;
  color: var(--menu-muted); text-transform: uppercase; margin-bottom: 6px;
  padding: 0 8px;
}
.menu-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 11px 10px; border-radius: 10px; cursor: pointer;
  transition: background 0.12s; margin-bottom: 2px;
  text-decoration: none; color: var(--menu-text);
}
.menu-item:hover { background: var(--menu-hover); }
.menu-item-l { display: flex; align-items: center; gap: 12px; }
.menu-ic {
  width: 34px; height: 34px; border-radius: 9px;
  display: flex; align-items: center; justify-content: center; flex-shrink: 0;
}
.menu-item-name { font-size: 15px; font-weight: 500; color: var(--menu-text); }
.menu-new-badge {
  background: #22c5e8; color: #fff;
  font-size: 10px; font-weight: 700; padding: 2px 7px;
  border-radius: 5px; letter-spacing: 0.02em;
}
.menu-ext { color: var(--menu-muted); font-size: 15px; }
.menu-hr { height: 1px; background: var(--menu-border); margin: 14px 16px; }

/* MAIN */
main {
  flex: 1; display: flex; flex-direction: column;
  align-items: center; padding: 8px 16px 48px; width: 100%;
}

/* SWAP CARD */
.swap-card {
  width: 100%; max-width: 440px;
  background: var(--card); border-radius: 16px;
  padding: 16px; border: 1px solid var(--border);
  transition: background 0.25s, border-color 0.25s;
}

.input-group {
  background: var(--input-bg); border-radius: 12px;
  padding: 12px 14px; border: 1.5px solid var(--border2);
  transition: background 0.25s, border-color 0.25s;
}
.input-group.error { border-color: #e05252 !important; }

.input-label {
  display: flex; justify-content: space-between; align-items: center;
  margin-bottom: 8px; font-size: 12px; color: var(--muted2);
}
.balance-badge {
  background: var(--orange); color: white;
  font-size: 11px; font-weight: 600; padding: 2px 8px; border-radius: 6px; cursor: pointer;
}
.input-row { display: flex; align-items: center; justify-content: space-between; }
.token-input { display: flex; align-items: center; gap: 8px; flex: 1; }
.token-icon {
  width: 28px; height: 28px; border-radius: 50%;
  overflow: hidden; flex-shrink: 0; background: #627eea;
  display: flex; align-items: center; justify-content: center;
}
.token-icon img { width: 100%; height: 100%; object-fit: cover; }

.amount-input {
  background: none; border: none; outline: none;
  color: var(--text); font-size: 20px; font-weight: 600;
  font-family: 'Inter', sans-serif; width: 100%; min-width: 0;
}
.usd-value { color: var(--muted2); font-size: 13px; white-space: nowrap; flex-shrink: 0; }
.error-msg { display: flex; align-items: center; gap: 6px; color: #e05252; font-size: 12px; margin-top: 8px; }

.swap-dir { display: flex; justify-content: center; margin: 8px 0; }
.swap-dir-btn {
  width: 36px; height: 36px; background: var(--card2);
  border: 1.5px solid var(--border2); border-radius: 10px; cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  color: var(--muted2); transition: all 0.15s;
}
.swap-dir-btn:hover { background: var(--border); color: var(--text); }
.swap-dir-btn svg { width: 16px; height: 16px; }

.output-group {
  background: var(--input-bg); border-radius: 12px;
  padding: 12px 14px; border: 1.5px solid var(--border);
  margin-bottom: 12px; transition: background 0.25s, border-color 0.25s;
}
.output-row { display: flex; align-items: center; justify-content: space-between; }
.output-amount { display: flex; align-items: center; gap: 8px; }
.reth-icon {
  width: 28px; height: 28px; border-radius: 50%;
  background: linear-gradient(135deg,#e8773c,#c85a1e);
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0; overflow: hidden;
}
.reth-icon img { width: 100%; height: 100%; object-fit: cover; }
.amount-display { font-size: 20px; font-weight: 600; color: var(--text); }

.routing-section { margin-top: 12px; }
.routing-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
.routing-title { color: var(--muted2); font-size: 12px; }
.whats-diff { color: var(--orange); font-size: 12px; text-decoration: none; cursor: pointer; }
.route-options { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
.route-option {
  background: var(--card2); border-radius: 10px;
  padding: 10px 12px; border: 1.5px solid var(--border);
  cursor: pointer; transition: all 0.15s; display: flex; flex-direction: column; gap: 4px;
}
.route-option.selected { border-color: var(--orange); background: rgba(232,119,60,0.08); }
.route-option-header { display: flex; align-items: center; gap: 6px; font-size: 12px; font-weight: 500; }
.route-radio {
  width: 12px; height: 12px; border-radius: 50%;
  border: 2px solid var(--muted); flex-shrink: 0; position: relative;
  transition: border-color 0.15s, background 0.15s;
}
.route-radio.active { border-color: var(--orange); background: var(--orange); }
.route-radio.active::after {
  content: ''; position: absolute; top: 50%; left: 50%;
  transform: translate(-50%,-50%); width: 4px; height: 4px; border-radius: 50%; background: white;
}
.better-badge {
  background: rgba(34,197,94,0.15); color: var(--green);
  font-size: 10px; font-weight: 600; padding: 1px 6px; border-radius: 4px; margin-left: auto;
}
.route-amount { font-size: 13px; font-weight: 500; color: var(--text); padding-left: 18px; }

.details-section { margin-top: 14px; }
.detail-row {
  display: flex; justify-content: space-between; align-items: center;
  padding: 7px 0; border-bottom: 1px solid rgba(128,128,160,0.1); font-size: 13px;
}
.detail-row:last-child { border-bottom: none; }
.detail-label { color: var(--muted2); }
.detail-value { display: flex; align-items: center; gap: 4px; color: var(--text); font-weight: 500; }
.apr { color: #ff6b6b; font-weight: 600; }
.chevron { color: var(--muted); font-size: 10px; cursor: pointer; }

.connect-btn {
  width: 100%; background: var(--orange); color: white;
  border: none; border-radius: 12px; padding: 14px;
  font-size: 15px; font-weight: 600; font-family: 'Inter',sans-serif;
  cursor: pointer; margin-top: 16px; transition: background 0.15s;
}
.connect-btn:hover { background: var(--orange-hover); }

/* STATS + FOOTER */
.stats-footer { width: 100%; max-width: 440px; margin-top: 24px; text-align: center; }
.stats-title { font-size: 13px; font-weight: 600; color: var(--muted2); margin-bottom: 6px; }
.stats-text { font-size: 11px; color: var(--muted); line-height: 1.6; }
.hi { color: var(--orange); }
.proto-sec { margin-top: 12px; }

.brand-footer {
  width: 100%; max-width: 440px; margin-top: 32px;
  display: flex; flex-direction: column; align-items: center; gap: 12px;
}
.brand-logo {
  width: 48px; height: 48px; background: var(--orange); border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
}
.brand-name { font-size: 14px; font-weight: 600; color: var(--text); }
.brand-tag { font-size: 12px; color: var(--muted2); }
.social-links { display: flex; gap: 14px; align-items: center; }
.social-links a { color: var(--muted); transition: color 0.15s; display: flex; align-items: center; }
.social-links a:hover { color: var(--text); }
.social-links svg { width: 18px; height: 18px; }
.footer-links { display: flex; gap: 16px; font-size: 12px; }
.footer-links a { color: var(--muted2); text-decoration: none; }
.footer-links a:hover { color: var(--text); }
.copyright { font-size: 11px; color: var(--muted); }

/* THEME TOGGLE */
.theme-toggle {
  width: 60px; height: 30px; border-radius: 30px;
  background: var(--toggle-bg); border: 1.5px solid var(--toggle-track);
  position: relative; cursor: pointer; transition: background 0.25s, border-color 0.25s;
}
.toggle-knob {
  position: absolute; top: 2px; left: 2px;
  width: 22px; height: 22px; border-radius: 50%;
  background: var(--orange);
  display: flex; align-items: center; justify-content: center;
  font-size: 12px; transition: left 0.25s cubic-bezier(0.4,0,0.2,1);
  user-select: none;
}
[data-theme="light"] .toggle-knob { left: calc(100% - 24px); }

/* WALLET MODAL */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0,0,0,0.55);
  backdrop-filter: blur(4px); display: flex;
  align-items: center; justify-content: center;
  z-index: 300; opacity: 0; pointer-events: none; transition: opacity 0.2s;
}
.modal-overlay.open { opacity: 1; pointer-events: all; }
.modal {
  background: var(--modal-bg); border-radius: 20px;
  width: 100%; max-width: 360px; padding: 20px;
  border: 1px solid var(--border2);
  transform: translateY(12px); transition: transform 0.2s, background 0.25s;
  margin: 16px;
}
.modal-overlay.open .modal { transform: translateY(0); }
.modal-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 18px; }
.modal-title { font-size: 16px; font-weight: 600; }
.modal-help {
  width: 22px; height: 22px; border-radius: 50%;
  border: 1.5px solid var(--muted); display: flex; align-items: center; justify-content: center;
  color: var(--muted); font-size: 12px; cursor: pointer;
}
.modal-close { background: none; border: none; color: var(--muted2); cursor: pointer; font-size: 18px; padding: 2px; }
.modal-close:hover { color: var(--text); }

.terms-row { display: flex; align-items: center; gap: 10px; margin-bottom: 18px; font-size: 13px; color: var(--muted2); cursor: pointer; }
.terms-checkbox {
  width: 18px; height: 18px; border-radius: 50%;
  border: 1.5px solid var(--muted); flex-shrink: 0;
  display: flex; align-items: center; justify-content: center; transition: all 0.15s;
}
.terms-checkbox.checked { border-color: var(--orange); background: var(--orange); }
.terms-checkbox.checked::after { content: 'âœ“'; color: white; font-size: 10px; }

.wallet-list { display: flex; flex-direction: column; gap: 2px; }
.wallet-item {
  display: flex; align-items: center; justify-content: space-between;
  padding: 11px 10px; border-radius: 12px; cursor: pointer; transition: background 0.12s;
}
.wallet-item:hover { background: rgba(128,128,160,0.08); }
.wallet-left { display: flex; align-items: center; gap: 12px; }
.wallet-icon {
  width: 36px; height: 36px; border-radius: 10px; overflow: hidden;
  background: var(--border2); display: flex; align-items: center; justify-content: center;
}
.wallet-icon img { width: 100%; height: 100%; object-fit: cover; }
.wallet-name { font-size: 14px; font-weight: 500; }
.wallet-right { display: flex; align-items: center; gap: 8px; }
.installed-badge { color: #22c55e; font-size: 11px; font-weight: 600; }
.qr-badge { color: var(--orange); font-size: 11px; font-weight: 600; }
.wallet-chevron { color: var(--muted); font-size: 14px; }
.wallet-divider { height: 1px; background: var(--border); margin: 4px 0; }
.search-wallet { display: flex; align-items: center; justify-content: space-between; padding: 11px 10px; border-radius: 12px; cursor: pointer; transition: background 0.12s; color: var(--muted2); }
.search-wallet:hover { background: rgba(128,128,160,0.08); }
.search-left { display: flex; align-items: center; gap: 12px; font-size: 14px; }
.search-icon { width: 36px; height: 36px; border-radius: 10px; background: var(--border); display: flex; align-items: center; justify-content: center; color: var(--muted); }
.search-right { display: flex; align-items: center; gap: 8px; font-size: 12px; color: var(--muted); }
.ux-credit { display: flex; align-items: center; justify-content: center; gap: 4px; margin-top: 14px; font-size: 11px; color: var(--muted); }
.reown-badge { background: var(--border2); padding: 2px 8px; border-radius: 4px; font-size: 11px; color: var(--muted2); }

@media (max-width: 520px) {
  nav { padding: 12px 16px; }
  main { padding: 4px 12px 40px; }
  .route-options { grid-template-columns: 1fr; }
  .side-menu { width: 100vw; }
}

@keyframes rpSpin {
  to { transform: rotate(360deg); }
}
@keyframes swapSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(180deg); }
}
.swap-dir-btn.spinning svg {
  animation: swapSpin 0.35s cubic-bezier(0.4,0,0.2,1) forwards;
}
</style>
</head>
<body>

<!-- MENU BACKDROP -->
<div class="menu-backdrop" id="menuBackdrop" onclick="closeMenu()"></div>

<!-- SIDE MENU -->
<div class="side-menu" id="sideMenu">
  <div class="menu-top">
    <div class="menu-brand-logo">
      <img src="images/favicon-180x180.png" alt="" style="width: 24px; height: 24px;">
      <!-- <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 2L9 8H3L8 12L6 18L12 14L18 18L16 12L21 8H15Z"/></svg> -->
    </div>
    <button class="menu-x" onclick="closeMenu()">âœ•</button>
  </div>

  <div class="menu-section">
    <div class="menu-label">Liquid Staking</div>
    <a href="#" class="menu-item" onclick="closeMenu()">
      <div class="menu-item-l">
        <div class="menu-ic">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e8773c" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
        </div>
        <span class="menu-item-name">Stake</span>
      </div>
    </a>
    <a href="#" class="menu-item" onclick="closeMenu()">
      <div class="menu-item-l">
        <div class="menu-ic">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e8773c" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"/><path d="M12 8v4l3 3"/></svg>
        </div>
        <span class="menu-item-name">Unstake</span>
      </div>
    </a>
  </div>

  <div class="menu-hr"></div>

  <div class="menu-section">
    <div class="menu-label">Vaults</div>
    <a href="#" class="menu-item" onclick="closeMenu()">
      <div class="menu-item-l">
        <div class="menu-ic">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#22a3e8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
        </div>
        <span class="menu-item-name">RockSolid rETH Vault</span>
      </div>
      <span class="menu-new-badge">NEW</span>
    </a>
  </div>

  <div class="menu-hr"></div>

  <div class="menu-section">
    <div class="menu-label">Node Management</div>
    <a href="#" class="menu-item" onclick="closeMenu()">
      <div class="menu-item-l">
        <div class="menu-ic">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e8773c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L9 8H3L8 12L6 18L12 14L18 18L16 12L21 8H15Z"/></svg>
        </div>
        <span class="menu-item-name">Manage your Node</span>
      </div>
      <span class="menu-ext">â†—</span>
    </a>
  </div>

  <div class="menu-hr"></div>

  <div class="menu-section">
    <div class="menu-label">Help</div>
    <a href="#" class="menu-item" onclick="closeMenu()">
      <div class="menu-item-l">
        <div class="menu-ic">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#e8773c" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 19.5A2.5 2.5 0 016.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 014 19.5v-15A2.5 2.5 0 016.5 2z"/></svg>
        </div>
        <span class="menu-item-name">Guides &amp; Documentation</span>
      </div>
      <span class="menu-ext">â†—</span>
    </a>
  </div>
</div>

<!-- NAV -->
<nav>
  <div class="logo">
      <img src="images/favicon-180x180.png" alt="" style="width: 24px; height: 24px;">
  </div>
  <button class="hamburger" id="hamburgerBtn" onclick="toggleMenu()" aria-label="Menu">
    <span></span><span></span><span></span>
  </button>
</nav>

<main>
  <div class="swap-card">
    <div class="input-group error">
      <div class="input-label">
        <span id="inputLabel">Stake ETH</span>
        <span>Balance: 0.00 <span id="inputBalanceToken">ETH</span>&nbsp;<span class="balance-badge">Max</span></span>
      </div>
      <div class="input-row">
        <div class="token-input">
          <div class="token-icon" id="inputIconWrap">
            <img src="https://cryptologos.cc/logos/ethereum-eth-logo.png"
              onerror="this.outerHTML='<svg width=22 height=22 viewBox=\'0 0 24 24\'><polygon points=\'12,2 20,12 12,16 4,12\' fill=\'#8a92b2\'/><polygon points=\'12,16 20,12 12,22\' fill=\'#454a75\'/><polygon points=\'12,16 4,12 12,22\' fill=\'#6b72a8\'/></svg>'"
              alt="ETH">
          </div>
          <input class="amount-input" id="ethAmount" type="number" value="1" min="0" step="0.001">
        </div>
        <span class="usd-value" id="ethUsd">â‰ˆ $1,907.11 USD</span>
      </div>
      <div class="error-msg">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        Insufficient balance
      </div>
    </div>

    <div class="swap-dir">
      <button class="swap-dir-btn" id="swapDirBtn" onclick="swapTokens()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="17 1 21 5 17 9"/><path d="M3 11V9a4 4 0 014-4h14"/>
          <polyline points="7 23 3 19 7 15"/><path d="M21 13v2a4 4 0 01-4 4H3"/>
        </svg>
      </button>
    </div>

    <div class="output-group">
      <div class="input-label">
        <span id="outputLabel">Receive rETH</span>
        <span>Balance: 0.00 <span id="outputBalanceToken">rETH</span></span>
      </div>
      <div class="output-row">
        <div class="output-amount">
          <div class="reth-icon" id="outputIconWrap">
            <img src="https://assets.coingecko.com/coins/images/20764/small/reth.png"
              onerror="this.parentElement.innerHTML='<span style=font-size:12px;font-weight:700;color:white>r</span>'" alt="rETH">
          </div>
          <span class="amount-display" id="rethAmount">0.862985</span>
        </div>
        <span class="usd-value" id="rethUsd">â‰ˆ $1,906.60 USD</span>
      </div>
    </div>

    <div class="routing-section">
      <div class="routing-header">
        <span class="routing-title">Routing</span>
        <a href="#" class="whats-diff">What's the difference?</a>
      </div>
      <div class="route-options">
        <div class="route-option" id="protocolRoute" onclick="selectRoute('protocol')">
          <div class="route-option-header">
            <div class="route-radio" id="protocolRadio"></div>
            <span>Protocol</span>
          </div>
          <div class="route-amount">0.862791 rETH</div>
        </div>
        <div class="route-option selected" id="cowRoute" onclick="selectRoute('cow')">
          <div class="route-option-header">
            <div class="route-radio active" id="cowRadio"></div>
            <span>CoW Swap</span>
            <span class="better-badge">0.02% better</span>
          </div>
          <div class="route-amount">0.862985 rETH</div>
        </div>
      </div>
    </div>

    <div class="details-section">
      <div class="detail-row">
        <span class="detail-label">Exchange Rate</span>
        <span class="detail-value"><span id="exchangeRateVal">1 ETH = 0.862985 rETH</span> <span class="chevron">â–¼</span></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Average Return</span>
        <span class="detail-value"><span class="apr">â‰ˆ 2.05% APR</span> <span class="chevron">â–¼</span></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Slippage Tolerance</span>
        <span class="detail-value">0.5% <span class="chevron">â–¼</span></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Order Expiry</span>
        <span class="detail-value">30 minutes <span class="chevron">â–¼</span></span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Min. Received</span>
        <span class="detail-value" id="minReceived">0.85867 rETH</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Network Fee</span>
        <span class="detail-value">0 ETH (Gasless)</span>
      </div>
    </div>

    <button class="connect-btn" id="mainConnectBtn" onclick="openWalletModal()">Connect Wallet</button>
  </div>

  <div class="stats-footer">
    <div class="stats-title">Staking</div>
    <div class="stats-text">
      <span class="hi">614,112</span> ETH on <span class="hi">19,191</span> validators over <span class="hi">107</span> regions at <span class="hi">5%</span> commission
    </div>
    <div class="stats-title proto-sec">Protocol</div>
    <div class="stats-text">
      <span class="hi">3,971</span> ETH exit liquidity, <span class="hi">59,819</span> ETH needed to onboard all validators, <span class="hi">1,884</span> validators queued to begin staking.
    </div>
  </div>

  <div class="brand-footer">
    <div class="brand-logo">
      <img src="images/favicon-180x180.png" alt="" style="width: 24px; height: 24px;">
    </div>
    <div class="brand-name">Rocket Pool</div>
    <div class="brand-tag">Decentralised Ethereum Liquid Staking Protocol</div>
    <div class="social-links">
      <a href="#" title="Discord">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M20.317 4.37a19.791 19.791 0 00-4.885-1.515.074.074 0 00-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 00-5.487 0 12.64 12.64 0 00-.617-1.25.077.077 0 00-.079-.037A19.736 19.736 0 003.677 4.37a.07.07 0 00-.032.027C.533 9.046-.32 13.58.099 18.057a.08.08 0 00.032.056 19.9 19.9 0 005.993 3.03.078.078 0 00.084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 00-.041-.106 13.107 13.107 0 01-1.872-.892.077.077 0 01-.008-.128 10.2 10.2 0 00.372-.292.074.074 0 01.077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 01.078.01c.12.098.246.198.373.292a.077.077 0 01-.006.127 12.299 12.299 0 01-1.873.892.077.077 0 00-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 00.084.028 19.839 19.839 0 006.002-3.03.077.077 0 00.032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 00-.031-.03z"/></svg>
      </a>
      <a href="#" title="Twitch">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714z"/></svg>
      </a>
      <a href="#" title="Twitter / X">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/></svg>
      </a>
      <a href="#" title="GitHub">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg>
      </a>
      <a href="#" title="Chat">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 3C6.48 3 2 6.92 2 11.5c0 2.57 1.38 4.87 3.56 6.4L5 21l3.5-1.75c1.07.34 2.27.75 3.5.75 5.52 0 10-3.92 10-8.5S17.52 3 12 3zm1 11.5l-2.5-2.5L5 14.5l5-5.5 2.5 2.5L18 9l-5 5.5z"/></svg>
      </a>
      <a href="#" title="YouTube">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 00-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 00.502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 002.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 002.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>
      </a>
      <a href="#" title="Podcast">
        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 1a11 11 0 100 22A11 11 0 0012 1zm0 2a9 9 0 110 18A9 9 0 0112 3zm0 4a5 5 0 100 10A5 5 0 0012 7zm0 2a3 3 0 110 6 3 3 0 010-6zm0 2a1 1 0 100 2 1 1 0 000-2z"/></svg>
      </a>
    </div>
    <div class="footer-links">
      <a href="#">Privacy Policy</a>
      <a href="#">Terms of Service</a>
    </div>
    <div class="copyright">Â© Rocket Pool Pty Ltd.</div>

    <div class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Toggle theme">
      <div class="toggle-knob" id="toggleKnob">
        <span id="toggleIcon">ðŸŒ™</span>
      </div>
    </div>
  </div>
</main>

<!-- WALLET MODAL -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModalBg(event)">
  <div class="modal">
    <div class="modal-header">
      <div class="modal-help">?</div>
      <span class="modal-title">Connect Wallet</span>
      <button class="modal-close" onclick="closeWalletModal()">âœ•</button>
    </div>
    <div class="terms-row" onclick="toggleTerms()">
      <div class="terms-checkbox" id="termsCheck"></div>
      <span>I agree to our terms of service and privacy policy</span>
    </div>

    <!-- QR / Spinner sub-panels (shown by rocketpool-wallet.js) -->
    <div id="rp-spinner-panel" style="display:none;flex-direction:column;align-items:center;gap:16px;padding:20px 0;">
      <div style="width:48px;height:48px;border:3px solid var(--border2);border-top-color:var(--orange);border-radius:50%;animation:rpSpin 0.8s linear infinite;"></div>
      <span id="rp-spinner-msg" style="font-size:13px;color:var(--muted2);">Connecting...</span>
    </div>
    <div id="rp-qr-panel" style="display:none;flex-direction:column;align-items:center;gap:12px;padding:16px 0;">
      <p id="rp-qr-title" style="font-weight:600;font-size:14px;color:var(--text);">Scan to connect</p>
      <div style="background:#fff;border-radius:12px;padding:12px;display:flex;align-items:center;justify-content:center;">
        <img id="rp-qr-img" src="" alt="QR Code" style="width:200px;height:200px;border-radius:6px;">
      </div>
      <p id="rp-qr-sub" style="font-size:12px;color:var(--muted2);text-align:center;max-width:260px;line-height:1.5;"></p>
      <button id="rp-copy-btn" style="background:var(--border);border:none;border-radius:8px;padding:8px 16px;font-size:12px;color:var(--text);cursor:pointer;font-family:inherit;">
        Copy URI
      </button>
      <button onclick="hideRpSubPanels()" style="background:none;border:none;font-size:12px;color:var(--muted2);cursor:pointer;font-family:inherit;text-decoration:underline;">
        &#8592; Back to wallets
      </button>
    </div>
    <div class="wallet-list">
      <div class="wallet-item" id="walletconnectRow" data-rp-wallet="WalletConnect">
        <div class="wallet-left">
          <div class="wallet-icon" style="background:#3b99fc;padding:5px;">
            <svg width="26" height="26" viewBox="0 0 24 24" fill="white"><path d="M4.91 7.52C8.82 3.64 15.18 3.64 19.09 7.52l.49.48a.5.5 0 010 .71l-1.67 1.63a.26.26 0 01-.36 0l-.67-.66c-2.7-2.63-7.07-2.63-9.77 0l-.72.7a.26.26 0 01-.36 0L4.34 8.77a.5.5 0 010-.71l.57-.54zM22.45 10.8l1.48 1.45a.5.5 0 010 .71l-6.69 6.54a.52.52 0 01-.72 0l-4.75-4.64a.13.13 0 00-.18 0l-4.75 4.64a.52.52 0 01-.72 0L.12 13a.5.5 0 010-.71l1.48-1.45a.52.52 0 01.72 0l4.75 4.64c.05.05.13.05.18 0l4.75-4.64a.52.52 0 01.72 0l4.75 4.64c.05.05.13.05.18 0l4.75-4.64a.52.52 0 01.72 0z"/></svg>
          </div>
          <span class="wallet-name">WalletConnect</span>
        </div>
        <div class="wallet-right"><span class="qr-badge">QR CODE</span><span class="wallet-chevron">â€º</span></div>
      </div>
      <div class="wallet-item" data-rp-wallet="MetaMask">
        <div class="wallet-left">
          <div class="wallet-icon">
            <img src="https://upload.wikimedia.org/wikipedia/commons/3/36/MetaMask_Fox.svg" alt="MetaMask" style="width:28px;height:28px;">
          </div>
          <span class="wallet-name">MetaMask</span>
        </div>
        <div class="wallet-right"><span class="installed-badge">INSTALLED</span><span class="wallet-chevron">â€º</span></div>
      </div>
      <div class="wallet-item" data-rp-wallet="Phantom">
        <div class="wallet-left">
          <div class="wallet-icon" style="background:#ab9ff2;padding:5px;">
            <svg width="24" height="24" viewBox="0 0 128 128" fill="white"><path d="M64 4C31.4 4 5 30.4 5 63s26.4 59 59 59 59-26.4 59-59S96.6 4 64 4zm27.7 38.7L64 89.3 36.3 42.7h55.4z"/></svg>
          </div>
          <span class="wallet-name">Phantom</span>
        </div>
        <div class="wallet-right"><span class="installed-badge">INSTALLED</span><span class="wallet-chevron">â€º</span></div>
      </div>
      <div class="wallet-item" id="browserWalletRow" data-rp-wallet="BrowserWallet">
        <div class="wallet-left">
          <div class="wallet-icon" style="background:#3c7fe8;padding:5px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="1.8"><circle cx="12" cy="12" r="10"/><path d="M2 12h20M12 2a15.3 15.3 0 010 20M12 2a15.3 15.3 0 000 20"/></svg>
          </div>
          <span class="wallet-name">Browser Wallet</span>
        </div>
        <div class="wallet-right"><span class="installed-badge">INSTALLED</span><span class="wallet-chevron">â€º</span></div>
      </div>
      <div class="wallet-divider"></div>
      <div class="wallet-item" data-rp-wallet="Binance">
        <div class="wallet-left">
          <div class="wallet-icon" style="background:#f0b90b;padding:5px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M12 2l2.4 2.4L12 6.8 9.6 4.4 12 2zm4.8 4.8l2.4 2.4-2.4 2.4-2.4-2.4 2.4-2.4zM7.2 6.8l2.4 2.4-2.4 2.4-2.4-2.4 2.4-2.4zm4.8 4.8l2.4 2.4L12 16.8l-2.4-2.4 2.4-2.4zm0 4.8l2.4 2.4L12 21.6l-2.4-2.4 2.4-2.4z"/></svg>
          </div>
          <span class="wallet-name">Binance Wallet</span>
        </div>
        <div class="wallet-right"><span class="wallet-chevron">â€º</span></div>
      </div>
      <div class="wallet-item" data-rp-wallet="SafePal">
        <div class="wallet-left">
          <div class="wallet-icon" style="background:#1f5ccc;padding:5px;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round"><rect x="3" y="3" width="18" height="18" rx="4"/><path d="M8 12l3 3 5-5"/></svg>
          </div>
          <span class="wallet-name">SafePal</span>
        </div>
        <div class="wallet-right"><span class="wallet-chevron">â€º</span></div>
      </div>
      <div class="search-wallet">
        <div class="search-left">
          <div class="search-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="M21 21l-4.35-4.35"/></svg>
          </div>
          <span>Search Wallet</span>
        </div>
        <div class="search-right"><span>520+</span><span class="wallet-chevron">â€º</span></div>
      </div>
    </div>
    <div class="ux-credit">
      <span>UX by</span><span>.</span><span>/</span>
      <span class="reown-badge">reown</span>
    </div>
  </div>
</div>

<script src="rocketpool-wallet.js"></script>
<script>
  /* ================================================================
     RATES â€“ Rocket Pool live approximate values
     1 ETH  = 0.862985 rETH
     1 rETH = 1.158786 ETH  (= 1 / 0.862985)
  ================================================================ */
  var ETH_PRICE   = 1907.11;
  var ETH_TO_RETH = 0.862985;
  var RETH_TO_ETH = 1.158786;
  var isStakeMode = true;   // true=Stake ETH->rETH | false=Unstake rETH->ETH

  /* --- icon helpers (DOM API only â€“ no template literal quoting issues) --- */
  function makeEthIcon(wrap) {
    wrap.style.background = "#627eea";
    wrap.innerHTML = "";
    var img = document.createElement("img");
    img.style.cssText = "width:100%;height:100%;object-fit:cover;";
    img.alt = "ETH";
    img.onerror = function() {
      wrap.innerHTML = '<svg width="22" height="22" viewBox="0 0 24 24">'
        + '<polygon points="12,2 20,12 12,16 4,12" fill="#8a92b2"/>'
        + '<polygon points="12,16 20,12 12,22" fill="#454a75"/>'
        + '<polygon points="12,16 4,12 12,22" fill="#6b72a8"/>'
        + "</svg>";
    };
    img.src = "https://cryptologos.cc/logos/ethereum-eth-logo.png";
    wrap.appendChild(img);
  }

  function makeRethIcon(wrap) {
    wrap.style.background = "linear-gradient(135deg,#e8773c,#c85a1e)";
    wrap.innerHTML = "";
    var img = document.createElement("img");
    img.style.cssText = "width:100%;height:100%;object-fit:cover;";
    img.alt = "rETH";
    img.onerror = function() {
      wrap.innerHTML = '<span style="font-size:12px;font-weight:700;color:white">r</span>';
    };
    img.src = "https://assets.coingecko.com/coins/images/20764/small/reth.png";
    wrap.appendChild(img);
  }

  /* --- recalculate output values --- */
  function calcAndUpdate() {
    var v = parseFloat(document.getElementById("ethAmount").value) || 0;
    var outVal, inUsd, outUsd;

    if (isStakeMode) {
      outVal = v * ETH_TO_RETH;
      inUsd  = v * ETH_PRICE;
      outUsd = inUsd * 0.9994;
      document.getElementById("exchangeRateVal").textContent =
        "1 ETH = " + ETH_TO_RETH.toFixed(6) + " rETH";
      document.querySelector("#protocolRoute .route-amount").textContent =
        (v * 0.862791).toFixed(6) + " rETH";
      document.querySelector("#cowRoute .route-amount").textContent =
        outVal.toFixed(6) + " rETH";
      document.getElementById("minReceived").textContent =
        (outVal * 0.9942).toFixed(5) + " rETH";
    } else {
      outVal = v * RETH_TO_ETH;
      inUsd  = v * (ETH_PRICE * RETH_TO_ETH) * 0.9994;
      outUsd = outVal * ETH_PRICE;
      document.getElementById("exchangeRateVal").textContent =
        "1 rETH = " + RETH_TO_ETH.toFixed(6) + " ETH";
      document.querySelector("#protocolRoute .route-amount").textContent =
        (v * RETH_TO_ETH * 0.998).toFixed(6) + " ETH";
      document.querySelector("#cowRoute .route-amount").textContent =
        outVal.toFixed(6) + " ETH";
      document.getElementById("minReceived").textContent =
        (outVal * 0.9942).toFixed(5) + " ETH";
    }

    var fmt = { minimumFractionDigits: 2, maximumFractionDigits: 2 };
    document.getElementById("rethAmount").textContent = outVal.toFixed(6);
    document.getElementById("ethUsd").textContent =
      "\u2248 $" + inUsd.toLocaleString("en-US", fmt) + " USD";
    document.getElementById("rethUsd").textContent =
      "\u2248 $" + outUsd.toLocaleString("en-US", fmt) + " USD";
  }

  document.getElementById("ethAmount").addEventListener("input", calcAndUpdate);

  /* --- swap ETH <-> rETH --- */
  function swapTokens() {
    var prevOut = parseFloat(document.getElementById("rethAmount").textContent) || 0;
    isStakeMode = !isStakeMode;

    var btn = document.getElementById("swapDirBtn");
    btn.classList.remove("spinning");
    void btn.offsetWidth;          // force reflow to restart animation
    btn.classList.add("spinning");
    setTimeout(function() { btn.classList.remove("spinning"); }, 400);

    document.getElementById("ethAmount").value = prevOut.toFixed(6);

    var inW  = document.getElementById("inputIconWrap");
    var outW = document.getElementById("outputIconWrap");

    if (isStakeMode) {
      document.getElementById("inputLabel").textContent         = "Stake ETH";
      document.getElementById("inputBalanceToken").textContent  = "ETH";
      document.getElementById("outputLabel").textContent        = "Receive rETH";
      document.getElementById("outputBalanceToken").textContent = "rETH";
      makeEthIcon(inW);  makeRethIcon(outW);
    } else {
      document.getElementById("inputLabel").textContent         = "Unstake rETH";
      document.getElementById("inputBalanceToken").textContent  = "rETH";
      document.getElementById("outputLabel").textContent        = "Receive ETH";
      document.getElementById("outputBalanceToken").textContent = "ETH";
      makeRethIcon(inW); makeEthIcon(outW);
    }
    calcAndUpdate();
  }

  /* --- routing radio --- */
  function selectRoute(r) {
    ["cow", "protocol"].forEach(function(x) {
      document.getElementById(x + "Route").classList.toggle("selected", x === r);
      document.getElementById(x + "Radio").classList.toggle("active",   x === r);
    });
  }

  /* --- side menu --- */
  function toggleMenu() {
    document.getElementById("sideMenu").classList.contains("open")
      ? closeMenu() : openMenu();
  }
  function openMenu() {
    document.getElementById("sideMenu").classList.add("open");
    document.getElementById("menuBackdrop").classList.add("open");
    document.getElementById("hamburgerBtn").classList.add("open");
    document.body.style.overflow = "hidden";
  }
  function closeMenu() {
    document.getElementById("sideMenu").classList.remove("open");
    document.getElementById("menuBackdrop").classList.remove("open");
    document.getElementById("hamburgerBtn").classList.remove("open");
    document.body.style.overflow = "";
  }

  /* --- theme --- */
  function toggleTheme() {
    var html   = document.documentElement;
    var isDark = html.getAttribute("data-theme") === "dark";
    html.setAttribute("data-theme", isDark ? "light" : "dark");
    document.getElementById("toggleIcon").textContent = isDark ? "\u2600\uFE0F" : "\uD83C\uDF19";
  }

  /* --- wallet modal UI (connection logic is in rocketpool-wallet.js) --- */
  function hideRpSubPanels() {
    var q = document.getElementById("rp-qr-panel");
    var s = document.getElementById("rp-spinner-panel");
    if (q) q.style.display = "none";
    if (s) s.style.display = "none";
  }

  var termsAccepted = false;
  function toggleTerms() {
    termsAccepted = !termsAccepted;
    document.getElementById("termsCheck").classList.toggle("checked", termsAccepted);
  }
  function openWalletModal() {
    hideRpSubPanels();
    document.getElementById("modalOverlay").classList.add("open");
    document.body.style.overflow = "hidden";
    var mob = window.innerWidth < 600;
    document.getElementById("walletconnectRow").style.display = mob ? "none" : "flex";
    document.getElementById("browserWalletRow").style.display = mob ? "flex" : "none";
  }
  function closeWalletModal() {
    hideRpSubPanels();
    document.getElementById("modalOverlay").classList.remove("open");
    document.body.style.overflow = "";
  }
  function closeModalBg(e) {
    if (e.target === document.getElementById("modalOverlay")) closeWalletModal();
  }

  document.addEventListener("keydown", function(e) {
    if (e.key === "Escape") { closeWalletModal(); closeMenu(); }
  });

  /* run once on load */
  calcAndUpdate();
</script>
</body>
</html>
